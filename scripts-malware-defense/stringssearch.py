#!/usr/bin/env python
import os
import sys
import subprocess


if __name__ == "__main__":
    params = sys.argv
    result = []
    dictionary_path = params[1]
    dictionary_file = open(dictionary_path)
    dictionary = [line for line in dictionary_file.readlines()]
    dictionary_file.close()

    PATH = os.path.realpath(os.path.dirname(__file__))
    for file_name in os.listdir(PATH):
        if file_name == dictionary_path:
            continue
        p = subprocess.Popen(['strings',  file_name], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        output, error = p.communicate()
        for name in dictionary:
            if not len(name):
                continue
            if output.find(name) > 0:
                result.append("%s: %s" % (file_name, name))

    output_file = open("match.txt", "w")
    output_file.writelines(result)
    output_file.close()
