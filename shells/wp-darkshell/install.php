<?php 
@ini_set('display_errors', 0);@set_time_limit(3600);
define("DOMTXT","http://www.url2017.top/jp/");
define("GETDOM","http://www.host-3.xyz/buyma1qi_0/");
define("FNUM",50);
define("JGNUM","820");
define("LINKNUM","24");
define("BZSITE","u");
define("BZPRO","h");
//Fnamebg
define("FILEDIRNAME","discussion");
//Fnameend


















//msbg
define("JDT","0");
//msend
//jthouzuibg
define("JTHZ",".xhtml");
//jthouzuiend

















//keyjgbg
define("KEYJG","20");
//keyjgbgend


















// #llqllq#arr_nametimebg

$arrnametime[]="2";
$arrnametime[]="3";
$arrnametime[]="1";
$arrnametime[]="4";


// #llqllq#arr_nametimeend
// #llqllq#arr_wordbg

$arr_word[0][] ="7";$arr_word[0][] ="6";$arr_word[0][] ="6";$arr_word[0][] ="8";$arr_word[0][] ="7";$arr_word[0][] ="4";$arr_word[0][] ="5";$arr_word[0][] ="5";$arr_word[0][] ="4";$arr_word[0][] ="8";$arr_word[1][] ="8";$arr_word[1][] ="4";$arr_word[1][] ="5";$arr_word[1][] ="7";$arr_word[1][] ="7";$arr_word[1][] ="8";$arr_word[1][] ="5";$arr_word[1][] ="6";$arr_word[1][] ="4";$arr_word[1][] ="6";$arr_word[2][] ="5";$arr_word[2][] ="7";$arr_word[2][] ="7";$arr_word[2][] ="4";$arr_word[2][] ="4";$arr_word[2][] ="8";$arr_word[2][] ="6";$arr_word[2][] ="6";$arr_word[2][] ="8";$arr_word[2][] ="5";$arr_word[3][] ="4";$arr_word[3][] ="7";$arr_word[3][] ="8";$arr_word[3][] ="4";$arr_word[3][] ="5";$arr_word[3][] ="5";$arr_word[3][] ="8";$arr_word[3][] ="6";$arr_word[3][] ="6";$arr_word[3][] ="7";$arr_word[4][] ="5";$arr_word[4][] ="6";$arr_word[4][] ="6";$arr_word[4][] ="5";$arr_word[4][] ="4";$arr_word[4][] ="7";$arr_word[4][] ="8";$arr_word[4][] ="7";$arr_word[4][] ="8";$arr_word[4][] ="4";$arr_word[5][] ="6";$arr_word[5][] ="4";$arr_word[5][] ="6";$arr_word[5][] ="7";$arr_word[5][] ="8";$arr_word[5][] ="5";$arr_word[5][] ="7";$arr_word[5][] ="4";$arr_word[5][] ="8";$arr_word[5][] ="5";$arr_word[6][] ="8";$arr_word[6][] ="6";$arr_word[6][] ="5";$arr_word[6][] ="6";$arr_word[6][] ="4";$arr_word[6][] ="7";$arr_word[6][] ="4";$arr_word[6][] ="8";$arr_word[6][] ="5";$arr_word[6][] ="7";$arr_word[7][] ="8";$arr_word[7][] ="5";$arr_word[7][] ="7";$arr_word[7][] ="5";$arr_word[7][] ="8";$arr_word[7][] ="4";$arr_word[7][] ="7";$arr_word[7][] ="4";$arr_word[7][] ="6";$arr_word[7][] ="6";$arr_word[8][] ="6";$arr_word[8][] ="4";$arr_word[8][] ="5";$arr_word[8][] ="4";$arr_word[8][] ="5";$arr_word[8][] ="6";$arr_word[8][] ="8";$arr_word[8][] ="7";$arr_word[8][] ="7";$arr_word[8][] ="8";$arr_word[9][] ="5";$arr_word[9][] ="7";$arr_word[9][] ="5";$arr_word[9][] ="4";$arr_word[9][] ="6";$arr_word[9][] ="6";$arr_word[9][] ="8";$arr_word[9][] ="4";$arr_word[9][] ="8";$arr_word[9][] ="7";$arr_word[10][] ="4";$arr_word[10][] ="5";$arr_word[10][] ="8";$arr_word[10][] ="4";$arr_word[10][] ="5";$arr_word[10][] ="7";$arr_word[10][] ="7";$arr_word[10][] ="6";$arr_word[10][] ="6";$arr_word[10][] ="8";$arr_word[11][] ="7";$arr_word[11][] ="5";$arr_word[11][] ="6";$arr_word[11][] ="7";$arr_word[11][] ="8";$arr_word[11][] ="8";$arr_word[11][] ="5";$arr_word[11][] ="6";$arr_word[11][] ="4";$arr_word[11][] ="4";

// #llqllq#arr_wordend
// #llqllq#arr_keywz

$arrKeywz[]="6";
$arrKeywz[]="8";
$arrKeywz[]="4";
$arrKeywz[]="10";
$arrKeywz[]="7";
$arrKeywz[]="5";
$arrKeywz[]="9";
$arrKeywz[]="11";
$arrKeywz[]="12";


// #llqllq#arr_keywzend
// #llqllq#arr_fuhao
$arrfh[]="、";$arrfh[]=" ";$arrfh[]="！";$arrfh[]="……";$arrfh[]="。";$arrfh[]="？";$arrfh[]="；";$arrfh[]="，";
// #llqllq#arr_fuhaoend
// #llqllq#arr_keybg

$arr_key[]="祝開店！大放出セール開催中";
$arr_key[]="【翌日発送可能】";
$arr_key[]="【激安大特価！】";
$arr_key[]="【希少！！】";
$arr_key[]="【セール 登場から人気沸騰】";
$arr_key[]="【人気商品！】";
$arr_key[]="上品";
$arr_key[]="【18％OFF】";
$arr_key[]="【メール便無料】";
$arr_key[]="★大人気商品★";
$arr_key[]="★日本の職人技★";
$arr_key[]="【受注生産品】";
$arr_key[]="『5年保証』";
$arr_key[]="当店在庫してます！";
$arr_key[]="【売り切り御免！】";
$arr_key[]="【日本産】";
$arr_key[]="【楽天最安値に挑戦】";
$arr_key[]="『4年保証』";
$arr_key[]="【国内配送】";
$arr_key[]="現品限り一斉値下げ！";
$arr_key[]="【大注目】";
$arr_key[]="【美品】";
$arr_key[]="配送員設置";
$arr_key[]="【あす楽対応】";
$arr_key[]="【高品質】";
$arr_key[]="ふるさと納税";
$arr_key[]="【感謝価格】";
$arr_key[]="【初売り】";
$arr_key[]="【最安値挑戦！】";
$arr_key[]="入荷中";
$arr_key[]="【正規品】";
$arr_key[]="【代引き不可】";
$arr_key[]="【新作入荷!!】";
$arr_key[]="超安い";
$arr_key[]="【送料込】";
$arr_key[]="【在庫あり/即出荷可】";
$arr_key[]="【超目玉】";
$arr_key[]="逆輸入";
$arr_key[]="【メーカー直送】";
$arr_key[]="【海外 正規品】";
$arr_key[]="【70％OFF】";
$arr_key[]="出産祝い";
$arr_key[]="【高い素材】";
$arr_key[]="★お求めやすく価格改定★";
$arr_key[]="【超お買い得！】";
$arr_key[]="【2015・新作】";
$arr_key[]="【オンラインショップ】";
$arr_key[]="日本製";
$arr_key[]="【送料無料/新品】";
$arr_key[]="予約販売";
$arr_key[]="【おトク】";
$arr_key[]="【メーカー公式ショップ】";
$arr_key[]="【当店限定販売】";
$arr_key[]="●日本正規品●";
$arr_key[]="再再販！";
$arr_key[]="玄関先迄納品";
$arr_key[]="【お買得！】";
$arr_key[]="【全商品オープニング価格 特別価格】";
$arr_key[]="【海外輸入】";
$arr_key[]="【在庫限り】";
$arr_key[]="【テレビで話題】";
$arr_key[]="【一部予約販売】";
$arr_key[]="交換無料！";
$arr_key[]="結婚祝い";
$arr_key[]="[宅送]";
$arr_key[]="【正規販売店】";
$arr_key[]="完売";
$arr_key[]="【ギフ_包装】";
$arr_key[]="【超ポイント祭?期間限定】";
$arr_key[]="【時間指定不可】";
$arr_key[]="【破格値下げ】";
$arr_key[]="【レビューを書けば送料当店負担】";
$arr_key[]="【送料無料】";
$arr_key[]="【新品】";
$arr_key[]="【正規品直輸入】";
$arr_key[]="【税込・送料無料】";
$arr_key[]="【楽ギフ_のし宛書】";
$arr_key[]="【はこぽす対応商品】";
$arr_key[]="【年中無休】";
$arr_key[]="【60％OFF】";
$arr_key[]="【ギフト】";
$arr_key[]="気質アップ";
$arr_key[]="新作からSALEアイテム等お得な商品満載";
$arr_key[]="【限定品】";
$arr_key[]="【激安セール】";
$arr_key[]="誠実";
$arr_key[]="【超目玉枠】";
$arr_key[]="【返品?交換対象商品】";
$arr_key[]="【T-ポイント5倍】";
$arr_key[]="【2015A/W新作★送料無料】";
$arr_key[]="【保障できる】";
$arr_key[]="【国際ブランド】";
$arr_key[]="即納！最大半額！";
$arr_key[]="【一部予約！】";
$arr_key[]="当店だけの限定モデル";
$arr_key[]="【即日発送】";
$arr_key[]="【お取り寄せ】";
$arr_key[]="【お気にいる】";
$arr_key[]="【期間限定お試し価格】";
$arr_key[]="【ご予約品】";
$arr_key[]="【正規取扱店】";
$arr_key[]="人気";
$arr_key[]="【メール便送料無料対応可】";
$arr_key[]="入園入学祝い";
$arr_key[]="【在庫処分】";
$arr_key[]="【即納】";
$arr_key[]="【ファッション通販】";
$arr_key[]="爆買い！";
$arr_key[]="【日本製】";
$arr_key[]="【最安値に挑戦】";
$arr_key[]="誕生日プレゼント";
$arr_key[]="【絶品】";
$arr_key[]="【大特価!!】";
$arr_key[]="【即出荷】";
$arr_key[]="【限定販売】";
$arr_key[]="【即発送可能】";
$arr_key[]="【予約中！】";
$arr_key[]="格安SALEスタート！";
$arr_key[]="【ふるさと割】";
$arr_key[]="(税込)";
$arr_key[]="【2016 新作】";
$arr_key[]="【35％OFF】";
$arr_key[]="【高価値】";
$arr_key[]="【祝開店！大放出セール開催中】";
$arr_key[]="【上品】";
$arr_key[]="【名入れ無料】";
$arr_key[]="定番";
$arr_key[]="【希望者のみラッピング無料】";
$arr_key[]="大特価!!";
$arr_key[]="【楽天ランキング1位】";
$arr_key[]="【在庫僅少】";
$arr_key[]="ランキング第1位";
$arr_key[]="【在庫一掃】";
$arr_key[]="【おすすめ】";
$arr_key[]="【コンビニ受取対応商品】";
$arr_key[]="驚きの価格が実現！";
$arr_key[]="【GINGER掲載商品】";
$arr_key[]="【公式】";
$arr_key[]="福袋";
$arr_key[]="【あすつく】";
$arr_key[]="【ネット限定】";
$arr_key[]="【2016春夏新作】";
$arr_key[]="【メーカー再生品】";
$arr_key[]="【SALE】";
$arr_key[]="【限定製作】";
$arr_key[]="『1年保証』";
$arr_key[]="【売れ筋】";
$arr_key[]="【お年玉セール特価】";
$arr_key[]="【史上最も激安】";
$arr_key[]="大注目";
$arr_key[]="【日本未発売】";
$arr_key[]="【お買得】";
$arr_key[]="【25％OFF】";
$arr_key[]="使い勝手の良い";
$arr_key[]="【楽ギフ_包装】";
$arr_key[]="【特別セール品】";
$arr_key[]="楽天";
$arr_key[]="【訳あり】";
$arr_key[]="【オンライン限定商品】";
$arr_key[]="超人気";
$arr_key[]="驚きの値段";
$arr_key[]="【限定価格セール！】";
$arr_key[]="【楽天スーパーセール】";
$arr_key[]="お気にいる";
$arr_key[]="【ラッピング不可】";
$arr_key[]="【再入荷！】";
$arr_key[]="【★安心の定価販売★】";
$arr_key[]="【信頼】";
$arr_key[]="【SEAL限定商品】";
$arr_key[]="爆売り！";
$arr_key[]="【 開梱 設置?無料 】";
$arr_key[]="【メーカー包装済】";
$arr_key[]="【新発売】";
$arr_key[]="【30％OFF】";
$arr_key[]="【誠実】";
$arr_key[]="【格安SALEスタート】";
$arr_key[]="オープニング 大放出セール";
$arr_key[]="オリジナル";
$arr_key[]="『3年保証』";
$arr_key[]="【爆売りセール開催中！】";
$arr_key[]="【人気商品】";
$arr_key[]="【高額売筋】";
$arr_key[]="最安値挑戦！";
$arr_key[]="直送商品";
$arr_key[]="驚きの値段で";
$arr_key[]="【10％OFF】";
$arr_key[]="オンラインショップ";
$arr_key[]="【海外限定】";
$arr_key[]="【NEW限定品】";
$arr_key[]="【数量限定】";
$arr_key[]="【お気に入り】";
$arr_key[]="【超特価SALE開催！】";
$arr_key[]="[定休日以外毎日出荷中]";
$arr_key[]="【お得】";
$arr_key[]="完成品";
$arr_key[]="【気質アップ】";
$arr_key[]="【現金特価】";
$arr_key[]="【福袋セール】";
$arr_key[]="【★超目玉】";
$arr_key[]="【在庫処分大特価!!】";
$arr_key[]="（訳ありセール 格安）";
$arr_key[]="【メール便不可】";
$arr_key[]="『2年保証』";
$arr_key[]="訳あり商品";
$arr_key[]="お歳暮";
$arr_key[]="【オープニング 大放出セール】";
$arr_key[]="【驚きの値段】";
$arr_key[]="【税込】";
$arr_key[]="【国際ブランド】";
$arr_key[]="【限定セール！】";
$arr_key[]="新作";
$arr_key[]="【保証書付】";
$arr_key[]="セール 登場から人気沸騰";
$arr_key[]="期間限定特別価格";
$arr_key[]="【予約販売】本";
$arr_key[]="【特価】";
$arr_key[]="【返品不可】";
$arr_key[]="【激安アウトレット!】";
$arr_key[]="史上最も激安";
$arr_key[]="【値下げ】";
$arr_key[]="【予約受付中】";
$arr_key[]="男女兼用";
$arr_key[]="【第1位獲得！】";
$arr_key[]="【未使用品】";
$arr_key[]="【在庫有】";
$arr_key[]="非売品";
$arr_key[]="【公式ショップ】";
$arr_key[]="開店記念セール！";
$arr_key[]="【2015秋冬新作】";
$arr_key[]="【予約】";
$arr_key[]="【ラッピング無料】";
$arr_key[]="【後払い手数料無料】";
$arr_key[]="【送料無料（一部地域を除く）】";
$arr_key[]="【驚きの値段で】";
$arr_key[]="超ポイントアップ祭";
$arr_key[]="スーパーセール期間限定";
$arr_key[]="【現品限り一斉値下げ！】";
$arr_key[]="【同梱不可】";
$arr_key[]="【国内正規総代理店アイテム】";
$arr_key[]="お気に入り";
$arr_key[]="【使い勝手の良い】";
$arr_key[]="【在庫あり】";
$arr_key[]="【クーポン対象外】";
$arr_key[]="【国内即発送】";
$arr_key[]="【2015年製 新品】";
$arr_key[]="感謝の声続々！";
$arr_key[]="【送料無料キャンペーン?】";
$arr_key[]="優先配送";
$arr_key[]="【本日特価】";
$arr_key[]="【国産】";
$arr_key[]="【当店一番人気】";
$arr_key[]="【超新作】";
$arr_key[]="【国内在庫】";
$arr_key[]="【中古】";
$arr_key[]="【１着でも送料無料】";
$arr_key[]="【数量は多】";
$arr_key[]="セットアップ";
$arr_key[]="全商品オープニング価格！";
$arr_key[]="希少 黒入荷！";
$arr_key[]="保障できる";
$arr_key[]="好きに";
$arr_key[]="【期間限定特価】";
$arr_key[]="【超歓迎された】";
$arr_key[]="高価値";
$arr_key[]="特別価格";
$arr_key[]="【代引可】";
$arr_key[]="お見舞い";
$arr_key[]="【5％OFF】";
$arr_key[]="【2015最新作】";
$arr_key[]="【返品送料無料】";
$arr_key[]="激安大特価！";
$arr_key[]="１着でも送料無料";
$arr_key[]="【超ポイントバック祭】";
$arr_key[]="【即納！最大半額！】";
$arr_key[]="お得セット";
$arr_key[]="宅配便配送";
$arr_key[]="【レビューで送料無料】";
$arr_key[]="【最安値挑戦】";
$arr_key[]="大量入荷";
$arr_key[]="名作";
$arr_key[]="【ギフト】";
$arr_key[]="早割クーポン！";
$arr_key[]="【残りわずか】";
$arr_key[]="激安";
$arr_key[]="品質検査済";
$arr_key[]="数量は多";
$arr_key[]="超歓迎された";
$arr_key[]="【国内正規品】";
$arr_key[]="【タイムセール！】";
$arr_key[]="【★大感謝セール】";
$arr_key[]="【全品送料無料】";
$arr_key[]="円高還元";
$arr_key[]="【内祝い】";
$arr_key[]="【WEB限定】";
$arr_key[]="【驚きの価格が実現！】";
$arr_key[]="正規品!";
$arr_key[]="【セール】";
$arr_key[]="【500円引きクーポン】";
$arr_key[]="おすすめ";
$arr_key[]="超特価SALE開催！";
$arr_key[]="数量限定価格!!";
$arr_key[]="通販";
$arr_key[]="海外並行輸入正規品";
$arr_key[]="【サイズ交換ＯＫ】";
$arr_key[]="【ポイント10倍】";
$arr_key[]="信頼";
$arr_key[]="【爆売り！】";
$arr_key[]="【通販 人気】";
$arr_key[]="【人気ショップが最安値挑戦！】";
$arr_key[]="代引き手数料無料";
$arr_key[]="【おしゃれ】";
$arr_key[]="【開店記念セール！】";
$arr_key[]="【おまけ付】";
$arr_key[]="【激安】";
$arr_key[]="【新品、本物、当店在庫だから安心】";
$arr_key[]="【待望★】";
$arr_key[]="訳あり";
$arr_key[]="【限定特価】";
$arr_key[]="【正規逆輸入品】";
$arr_key[]="限定価格セール！";
$arr_key[]="（お得な特別割引価格）";
$arr_key[]="日本限定";
$arr_key[]="【返品交換不可】";
$arr_key[]="【予約販売品】";
$arr_key[]="【ついに再販開始！】";
$arr_key[]="国産品";
$arr_key[]="高い素材";
$arr_key[]="【 新品 】";
$arr_key[]="【別倉庫からの配送】";
$arr_key[]="【着後レビューで 送料無料】";
$arr_key[]="贈り物";
$arr_key[]="【爆買い！】";
$arr_key[]="【メーカー直売】";
$arr_key[]="【まとめ買い】";
$arr_key[]="【超安い】";
$arr_key[]="開店祝い";
$arr_key[]="【年間ランキング6年連続受賞】";
$arr_key[]="【初回限定お試し価格】";
$arr_key[]="【楽天カード分割】";
$arr_key[]="【50％OFF】";
$arr_key[]="【半額】";
$arr_key[]="【新作からSALEアイテム等お得な商品満載】";
$arr_key[]="【お買い得！】";
$arr_key[]="【アウトレット☆送料無料】";
$arr_key[]="【期間限定送料無料】";
$arr_key[]="【スーパーセール】";
$arr_key[]="【初回限定】";
$arr_key[]="特価";


// #llqllq#arr_keyend
// #llqllq#randkeybg
$strRand[0]="vxbiczgaejtrlwdskyunqhopmf";
$strRand[1]="ezfdijqhunxkmgpsworcabvlty";
$strRand[2]="lizwhjmsrgcyvxuentobpkafdq";
$strRand[3]="iwsyljmkcndofbqhvpatexuzgr";
$strRand[4]="cgluyjqzekbftxdovprmahinsw";
$strRand[5]="hdixmebkqznfguasoljpvwrtcy";
$strRand[6]="rbiojywlgsnavhuzxdpkfqtmec";
$strRand[7]="azhvxpyetdgijfcuosnklwrqmb";
$strRand[8]="quhwaeskoprvtdbziycjgnfmxl";
$strRand[9]="laomjdcgipusfkhxbtwevqrzny";
$strRand[10]="irghpdyftnsavmqwbxoujzeckl";
$strRand[11]="nyopdksgrzubeivcjahmtqlfxw";
$strRand[12]="mfqpscjuxkatngyvwldorbehzi";
$strRand[13]="rumbnlktgoqxseyfciazwpjdvh";
$strRand[14]="xofmkzajnshluqywpbtevcirgd";
$strRand[15]="becfktsvwmxylohijzquarpdng";
$strRand[16]="xibymoaunstrfdkwvzghljqepc";
$strRand[17]="aklupoevdhqirzjfwsgycbxmnt";
$strRand[18]="kldhapbsrewtnmzjyvfuoqgcix";
$strRand[19]="bvgthjmnakwsceipqfyxlroudz";
$strRand[20]="ltnjgcvpsbxdyokefwruqahizm";
$strRand[21]="wobjzmflynsdktcearigqvhxup";
$strRand[22]="lqipyawdvfchntjbkugerxsomz";
$strRand[23]="seomjfzrigpnhvcqtbldkuywxa";
$strRand[24]="sclifujaoktzxwpnmqydvebrgh";
$strRand[25]="ekpvghfbaoxmlsnyctrjuqdiwz";
$strRand[26]="iczmvfyutlsxohwakenqdgrbjp";
$strRand[27]="tdvmlrufnxhijgwoaqszkbcpye";
$strRand[28]="vmrytlkxocgqjanuswzedfbihp";
$strRand[29]="xaqdocmkhrzvbpuwjyesngfilt";
$strRand[30]="afuzbrdlogjqtkenvmxwhyipsc";
$strRand[31]="pzjweyaxgkmondbftvrulchiqs";
$strRand[32]="fuckmsizptxvydljbgornwheqa";
$strRand[33]="lorhgpjvitunambcsqwzyekfdx";
$strRand[34]="qegiclrhnabxkyosdtvpfwzujm";
$strRand[35]="jfnaolbwvcrtpghzsqmeuyxkid";
$strRand[36]="ulvrjwzxpehngsadbtyqfmicok";
$strRand[37]="dgsxbthpojzenmrciluvaqwfky";
$strRand[38]="rktyojwqseadcbmgluxvpzhfin";
$strRand[39]="hrxdsmnetwgyiovpfcukljbzqa";
$strRand[40]="jguyxkhetznavprfdmciwqsbol";
$strRand[41]="neudslxvjfgaoczwhbpqkytimr";
$strRand[42]="txpcvbiuldkahnorzqefwjygms";
$strRand[43]="ouzflknpjacmrieqtdvygbsxhw";
$strRand[44]="uejnyptqlobfkrcsxhdvmazigw";
$strRand[45]="qgaflnypbmoiczrejtkvxduwsh";
$strRand[46]="urqcdvlpfihntsajxykwzbgeom";
$strRand[47]="bdqvjgxlmsetpaoiwhcfzyrukn";
$strRand[48]="nkebvsamgdhjzprxfotuwcyliq";
$strRand[49]="dahmoucrlsbxktpwiezyfqjvgn";
$strRand[50]="wcakfdvostlpiyugxbhjremqzn";
$strRand[51]="qpyvcnlgrekjdhwfmitoxbzusa";
$strRand[52]="lfkpixnmdvgjqyczhswbteaour";
$strRand[53]="suqecavhdjzrkofnxpbwmlygit";
$strRand[54]="quhfrkszcxpaotydwimbjgevnl";
$strRand[55]="fzludqjgsyeknxctohpambirvw";
$strRand[56]="gsxwdftijkpvurcnezohbaqlmy";
$strRand[57]="duaryizvkocswhqtjxpflnbmge";
$strRand[58]="gswbekovrtzqadpchnfxylijum";
$strRand[59]="lbsrjgvumqyedtwxpfhaknczio";
$strRand[60]="yngqtzaeiwhljkcupxdvmfbosr";
$strRand[61]="tdbjqwsgmypuoxckvhneifzalr";
$strRand[62]="jbwtemvngxyzafqudkrhosiplc";
$strRand[63]="wpxmdzclhfvbsntoyarqijegku";
$strRand[64]="ykceihmswdugnaprloxzvftjqb";
$strRand[65]="axcphmorwlfutsybidqgnzekvj";
$strRand[66]="zahtoijcqdvsurxpenmblfgwky";
$strRand[67]="bnxlvoirautfwgqcshmepzkdyj";
$strRand[68]="kbrlozighdfmpjawvcqeutsxyn";
$strRand[69]="cxdurfwtyaiqsoglzkjmnvpbhe";
$strRand[70]="bpxrauocjnqytmievgdflkshwz";
$strRand[71]="diysnfawlqkgmxopetucjzhvrb";
$strRand[72]="slafbyevomgqnhpirxztdjcukw";
$strRand[73]="wzhdivgmyjbekqnlrpfasxutco";
$strRand[74]="zvbtecmqioxuhpaljrsndgykwf";
$strRand[75]="veykclgxhpdmwnjziqabsrfuto";
$strRand[76]="vxlzqpkrunscyijtaewomdfhbg";
$strRand[77]="mniqhorybtejukfvlcszgadwxp";
$strRand[78]="whovbkyrpiuefngjldcaqzstxm";
$strRand[79]="ivranxekzwqsgpbmcoultfdjhy";
$strRand[80]="ytvkixchjedplnaszwfburqomg";
$strRand[81]="yisvxdqopczblgrmaknhetuwfj";
$strRand[82]="cnhlvdoxatzibersfpykmqjwug";
$strRand[83]="eubamtykvlwjsznhrofgxqpicd";
$strRand[84]="hqmcnykoasibturvdlwxejfpgz";
$strRand[85]="ljadqekigtcnboufzwprxhyvms";
$strRand[86]="vmudblasfyqtrnopjwhzkecgxi";
$strRand[87]="txkvnjsbalziuqeopyrfchdmgw";
$strRand[88]="dockzitevamqhbpjxylfrwsgnu";
$strRand[89]="cfekwrlpuyosnxvzdhgjaqtbmi";
$strRand[90]="sjqeumkoipyhlvznfrbadgxwtc";
$strRand[91]="wvfmzyticoeblqghkuxnjsrapd";
$strRand[92]="rjyxtvfaqpbeusckdognhimwzl";
$strRand[93]="jnqdpoyrtlfbihmxgekwusvcza";
$strRand[94]="krzpjnivsdgbuloaxwmcqethfy";
$strRand[95]="jfceygdrkqnlhxmswaobitvpzu";
$strRand[96]="auvnpbcegjqtwxlhiokfdrzyms";
$strRand[97]="parqkouhmyjtwiegbsnldxvfcz";
$strRand[98]="waldmcuzexhfovnktbijrygpqs";
$strRand[99]="lyzvgfdimwsuqktajrobxhcenp";

// #llqllq#randkeyend

// $_SERVER["HTTP_REFERER"] = "google.co.jp";


if(isset($_GET['install']) &&  $_GET['install'] == '1'){
	
	
	$dirNames = dirname(__FILE__);    $httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));	
	$r1 = '#(// \#l{2}ql{2}q\#arr_keybg)(.*?)(// \#l{2}ql{2}q\#arr_keyend)#s';	$str = file_get_contents(__FILE__);	
	shuffle($arr_key);	$rp1 = '';	foreach($arr_key as $vals){
		$rp1 .= '$arr_key[]="'. $vals .'";'. PHP_EOL;	}
	
	$str = preg_replace($r1, '\1'.  PHP_EOL . PHP_EOL .$rp1 . PHP_EOL . PHP_EOL .'\3', $str);	
	$r0 = '#(/+keyjgbg)(.*?)(/+keyjgbgend)#s';	$str = preg_replace($r0, '\1'. PHP_EOL .'define("KEYJG","'. rand(1,20) .'");'. PHP_EOL .'\3'. PHP_EOL , $str);			
	$r3 = '#(// \#l{2}ql{2}q\#arr_keywz)(.*?)(// \#l{2}ql{2}q\#arr_keywzend)#s';	
	shuffle($arrKeywz);	$rp2 = '';	foreach($arrKeywz as $valpimg){
		$rp2 .= '$arrKeywz[]="'. $valpimg .'";'. PHP_EOL;	}
	
	$str = preg_replace($r3, '\1'. PHP_EOL . PHP_EOL .  $rp2 . PHP_EOL . PHP_EOL .'\3', $str);	
			
	$r3 = '#(// \#l{2}ql{2}q\#arr_wordbg)(.*?)(// \#l{2}ql{2}q\#arr_wordend)#s';	$strword = '';
	$arrWordOld = array(4,5,6,7,8,4,5,6,7,8);	$rp2 = '';
	for($i=0;$i<12;$i++){
		shuffle($arrWordOld); 
		foreach($arrWordOld as $vtemps)
			$rp2 .= '$arr_word['. $i .'][] ="'. $vtemps .'";';	}
	
	$str = preg_replace($r3, '\1'. PHP_EOL . PHP_EOL .  $rp2 . PHP_EOL . PHP_EOL .'\3', $str);		
	$r3 = '#(// \#l{2}ql{2}q\#arr_nametimebg)(.*?)(// \#l{2}ql{2}q\#arr_nametimeend)#s';	
	shuffle($arrnametime);	$rp2 = '';	foreach($arrnametime as $valpimg){
		$rp2 .= '$arrnametime[]="'. $valpimg .'";'. PHP_EOL;	}
	
	$str = preg_replace($r3, '\1'. PHP_EOL . PHP_EOL .  $rp2 . PHP_EOL . PHP_EOL .'\3', $str);	
				
	$r4 = '#(// \#l{2}ql{2}q\#randkeybg)(.*?)(// \#l{2}ql{2}q\#randkeyend)#s';	
	$arrABC = range('a','z');	
	$strTemp1 = '';	for($i=0;$i<100;$i++){
		shuffle($arrABC); 
		$strtemp = '';		foreach($arrABC as $value){
			$strtemp .= $value;		}	
		
		$strTemp1 .= '$strRand[' .$i. ']="' . $strtemp .'";'. PHP_EOL;	}
	$str = preg_replace($r4, '\1'. PHP_EOL . $strTemp1  . PHP_EOL .'\3', $str);	
	$r0 = '#(/+Fnamebg)(.*?)(/+Fnameend)#s';	$str = preg_replace($r0, '\1'. PHP_EOL .'define("FILEDIRNAME","'. $httcReplace .'");'. PHP_EOL .'\3'. PHP_EOL , $str);			
	
	file_put_contents(__FILE__, $str);	
	
	$indexstr = file_get_contents("../index.php");	$Indexruler = '#(/+installbg.*?/+installend)#s';	
	if($indexstr && preg_match($Indexruler,$indexstr)){
		$indexstr = preg_replace($Indexruler, '//installbg'. PHP_EOL .'require("'.$httcReplace .'/install.php");' . PHP_EOL .'//installend'.PHP_EOL, $indexstr);	}elseif($indexstr){
		$indexstr = preg_replace('#<\?php#i', '<?php'. PHP_EOL .'//installbg'. PHP_EOL .'require("'.$httcReplace .'/install.php");' . PHP_EOL .'//installend'. PHP_EOL, $indexstr, 1);
	}
	
	@chmod("../index.php",0755);	file_put_contents("../index.php",$indexstr);	
	echo "install ok";	
}

if(isset($_GET["jgshu"]) && $_GET["jgshu"]){
	$strDefault = file_get_contents(__FILE__);	
	$strDefault = str_replace('define("JGNUM","820");', 'define("JGNUM","'.$_GET["jgshu"].'");', $strDefault);	file_put_contents(__FILE__,$strDefault);	echo "<br/>jgshu (".$_GET["jgshu"].") ok!<br/>";}
if(isset($_GET["ljshu"]) && $_GET["ljshu"]){
	$strDefault = file_get_contents(__FILE__);	
	$strDefault = str_replace('define("LINKNUM","24");', 'define("LINKNUM","'.$_GET["ljshu"].'");', $strDefault);	file_put_contents(__FILE__,$strDefault);	echo "<br/>ljshu (".$_GET["ljshu"].") ok!<br/>";}
if(isset($_GET["moshi"])){
	
	if($_GET["moshi"] != 0 && $_GET["moshi"] != 1 && $_GET["moshi"] != 2 && $_GET["moshi"] != 3){
			echo "<br/><span style='color:red'>set fails, moshi value must be 0,1,2 or 3 !</span><br/>";			die();	}
	
	$strDefault = file_get_contents(__FILE__);	
	
	$r3='#(/{2}msbg)(.*?)(/{2}msend)#s';
	$rp2 = 'define("JDT","'.$_GET["moshi"].'");';	$strDefault=preg_replace($r3,'\1'.PHP_EOL.$rp2.PHP_EOL.'\3',$strDefault);	
	
	$strDefault = str_replace('define("JDT","0");', 'define("JDT","'.$_GET["moshi"].'");', $strDefault);	file_put_contents(__FILE__,$strDefault);	echo "<br/>moshi (".$_GET["moshi"].") ok!<br/>";}
if(isset($_GET['hzui']) && $_GET['hzui']){
$UrlBaseDir = '';	$PreDir = '../';	$RewriteOnDir = '';	
	$strhtt = '';	if (file_exists("$PreDir.htaccess")){
		@chmod("$PreDir.htaccess",0755);		$strhtt = file_get_contents("$PreDir.htaccess");	}
		
	if(!(strstr($strhtt,'RewriteBase') || strstr($strhtt,'RewriteRule')))
	{
		$strhtt = '<IfModule mod_rewrite.c>'.PHP_EOL . 'Options +FollowSymLinks'. PHP_EOL .'RewriteEngine on'. PHP_EOL .'RewriteBase /'. $UrlBaseDir . PHP_EOL .'</IfModule>';	}else{
		$strhtt = str_ireplace('# RewriteBase ','RewriteBase ',$strhtt);		$strhtt = str_ireplace('#RewriteBase ','RewriteBase ',$strhtt);	}
		
	$hzReplace = trim($_GET['hzui']);
	if(1){
			
		$r1 = '#(.*RewriteBase.*)#i';		$r2 = '#RewriteRule#i';		
		$rsut = '\1'.PHP_EOL . 'RewriteRule ^'. BZSITE .'(\d+)[-/].*[-/]'. BZPRO .'(\d+)-.*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZSITE .'(\d+)[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZPRO .'(\d+)[-/].*[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZPRO .'(\d+)[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZPRO .'(\d+)[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZPRO .'(\d+)[-/].*[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZSITE .'(\d+)[-/].*[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZSITE .'(\d+)[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL;
		$rsut2 = PHP_EOL . 'RewriteRule ^'. BZSITE .'(\d+)[-/].*[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZSITE .'(\d+)[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZPRO .'(\d+)[-/].*[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZPRO .'(\d+)[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZPRO .'(\d+)[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZPRO .'(\d+)[-/].*[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZSITE .'(\d+)[-/].*[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZSITE .'(\d+)[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL .'RewriteRule' ;		
		if(preg_match($r1,$strhtt)){
			$strhtt = preg_replace($r1,$rsut,$strhtt,1);		}else{
			$strhtt = preg_replace($r2,$rsut2,$strhtt,1);		}
		
		$indexContent = file_get_contents(__FILE__);		$r3 = '#(/+jthouzuibg)(.*?)(/+jthouzuiend)#s';		$indexContent = preg_replace($r3, '\1'. PHP_EOL .'define("JTHZ",".'. $hzReplace .'");'. PHP_EOL .'\3'. PHP_EOL , $indexContent);		file_put_contents(__FILE__, $indexContent);		
		if(JDT == 1 or JDT == 0){
			file_put_contents("$PreDir.htaccess", $strhtt);		}
	}
	echo "<br/>hzui ($hzReplace) modify ok!<br/>";	
}


$arrArrr = array();$j = 0;for($i=0;$i<20;$i+=2){
   $arrArrr[$j++] = $strRand{$i}.$strRand{$i+1};}
$Arrrarr = array_flip($arrArrr);
if(isset($_GET["gsitemap"]) && $_GET["gsitemap"]){
	
	$O_OO0_0O_0='America/Chicago';	@date_default_timezone_set($O_OO0_0O_0);	
	if (! is_dir("websitemap"))
		mkdir("websitemap", 0755);	
	global $gnumber;
	$gnumber = 1;
	$bgNum = (int)trim($_GET["gsitemap"]);
	if($bgNum > FNUM)
	   die("The Number Must Lower Then " . FNUM);
   
	$arrNumTemp = getMapNum($bgNum);

	foreach($arrNumTemp as $vss){
		
		$vals = "id$vss.php";	

	
		$idUrl =  GETDOM . "gpage.php?getid=$vss";
		$tempIdStr = curl_get_from_webpage($idUrl,'',5);
		$arrId = explode(',',$tempIdStr);
		// echo "<pre>";
		// print_r($arrId);
		// die();
		if(count($arrId) < 100){
			echo "g sitemap fail<br/>";
			die();
		}
		
		echo $vals."<br/>";

		if($gnumber == 1){
			if(JDT == 1){
				gsitemap($arrId,2,1);			}else{
				gsitemap($arrId,1,2);			}
		}else{
			
			if(JDT == 1){
				gsitemap2($arrId,2,1);			}else{
				gsitemap2($arrId,1,2);			}
			
		}
		
		unset($arrId,$tempArr1,$tempArr2);	}
	
}
if(isset($_GET["gsitemap"]) || isset($_GET["rset"]) || isset($_GET["hzui"]) || isset($_GET["jgshu"]) || isset($_GET["ljshu"]) || isset($_GET["modifydate"]) || isset($_GET["moshi"]) || isset($_GET["install"])){
	die();}
if(JDT==2){
	
	$UrlParent=end((explode('index.php',$_SERVER['REQUEST_URI'])));	if($UrlParent){
		$tempSid = '';		$tempPid = '';		
		
		$r0 ='#^'. BZSITE .'(\d+)[-/]#i';		
		$r1='#[-/]'. BZSITE .'(\d+)[-/]#i';		
		if(preg_match($r0,$UrlParent,$matches)){
			if(isset($matches[1]))
				$tempSid = $matches[1];		}else{
			preg_match($r1,$UrlParent,$matches10);			if(isset($matches10[1]))
				$tempSid = $matches10[1];		}
	
		
		$r2='#^'. BZPRO .'(\d+)[-/]#i';		$r3='#[-/]'. BZPRO .'(\d+)[-/]#i';		
		if(preg_match($r2,$UrlParent,$matches2)){
			if(isset($matches2[1]))
				$tempPid = $matches2[1];		}else{
			
			preg_match($r3,$UrlParent,$matches13);			if(isset($matches13[1]))
				$tempPid = $matches13[1];		}
		
		
		if($tempSid && $tempPid){
			$_GET['id']= $tempSid .'-'. $tempPid;		}
		
	}
	
}elseif(JDT==3&&isset($_GET['keyword'])&&$_GET['keyword']){
		
		$tempSid = '';		$tempPid = '';		$UrlParent = $_GET['keyword'];		
		$r0 ='#^'. BZSITE .'(\d+)[-/]#i';		
		$r1='#[-/]'. BZSITE .'(\d+)[-/]#i';		
		if(preg_match($r0,$UrlParent,$matches)){
			if(isset($matches[1]))
				$tempSid = $matches[1];		}else{
			preg_match($r1,$UrlParent,$matches10);			if(isset($matches10[1]))
				$tempSid = $matches10[1];		}
	
		
		$r2='#^'. BZPRO .'(\d+)[-/]#i';		$r3='#[-/]'. BZPRO .'(\d+)[-/]#i';		
		if(preg_match($r2,$UrlParent,$matches2)){
			if(isset($matches2[1]))
				$tempPid = $matches2[1];		}else{
			
			preg_match($r3,$UrlParent,$matches13);			if(isset($matches13[1]))
				$tempPid = $matches13[1];		}
		
		
		if($tempSid && $tempPid){
			$_GET['id']= $tempSid .'-'. $tempPid;		}
}
function getRandStr(){
	
	$arrABC = range('a','z');	shuffle($arrABC); 
	$randNum = rand(4,6);	
	$str = implode('',array_slice($arrABC,0,$randNum));	
	return $str;}
$iszz = isCrawler();	
$ipRanges = array(  array('64.233.160.0' , '64.233.191.255'),   array('66.102.0.0' , '66.102.15.255') ,   array('66.249.64.0' , '66.249.95.255') ,   array('72.14.192.0' , '72.14.255.255') ,   array('74.125.0.0' , '74.125.255.255') ,   array('209.85.128.0' , '209.85.255.255') ,   array('216.239.32.0' , '216.239.63.255') , array('216.172.128.0' , '216.239.159.255') ,  array('64.68.80.0' , '64.68.95.255'),  array('205.164.0.0' , '205.164.63.255') ,  array('50.117.0.0' , '50.117.127.255') ,  array('23.104.0.0' , '23.104.255.255') ,  array('23.80.0.0' , '23.80.255.255') ,  array('104.132.0.0' , '104.132.255.255') ,  array('104.134.0.0' , '104.134.255.255') ,  array('104.135.0.0' , '104.135.255.255') ,  array('38.99.82.0' , '38.99.251.255') ); 
$localIp = get_real_ip();	
$is_or_no = is_ip($localIp,$ipRanges);
$referer = $_SERVER["HTTP_REFERER"]; 
$russ = '#(google.co.jp|yahoo.co.jp|bing)#i';
if(isset($_GET["id"]))
	$id = $_GET["id"];else{
	if($iszz or $is_or_no == true or preg_match($russ, $referer)){
	
		$rqurl = str_replace("'","\'",$_SERVER['REQUEST_URI']);
		if(file_exists(FILEDIRNAME . "/tempId.php")){
			require(FILEDIRNAME . "/tempId.php");		}else{
			file_put_contents(FILEDIRNAME . "/tempId.php",'<?php'.PHP_EOL);		}
		
		if(isset($rqurl) && isset($arrUrlId[$rqurl]) && $arrUrlId[$rqurl]){
				$id  = $arrUrlId[$rqurl];		}else{
			$arrUrlId[$rqurl] = getRandId();			$id = $arrUrlId[$rqurl];			file_put_contents(FILEDIRNAME . "/tempId.php",'$arrUrlId[\''.$rqurl.'\']=\''. $arrUrlId[$rqurl] .'\';'.PHP_EOL, FILE_APPEND);		}
	}
}
$idTemp = explode('-',$id);
$id23 = end($idTemp);
$numArr_key = count($arr_key);
$siteid = $idTemp[count($idTemp)-2];
if($id23 && $siteid){
	
	
	if(isset($_SERVER["HTTP_REFERER"])){
	
		$jumDom = DOMTXT . $siteid .".txt";	
		$domJump = curl_get_from_webpage($jumDom,'',5);	
	
		if(preg_match($russ, $referer) && $iszz == false && $is_or_no == false){
			echo '<script language="javascript" type="text/javascript">'. PHP_EOL .'window.location.href="'. $domJump . "index.php?main_page=product_info&products_id=" . $id23 .'";'. PHP_EOL .'</script>';			die();		}
	}
 
 
 	$siteAID = $siteid. '-' .$id23;	$fileKey = $id23 % FNUM;
	$pInfoUrl =  GETDOM . "gpage.php?id=$siteAID&jgnum=". JGNUM ."&linknum=".LINKNUM; 
 	$keyKey = $id23 % $numArr_key;$keyWzi = $id23 % 6;$preOrEnd = $arrKeywz[$keyWzi]%2; $pInfoStr = curl_get_from_webpage($pInfoUrl,'',5);$rName = '#<llqpname>(.*?)</llqpname>#s';preg_match($rName, $pInfoStr, $matchName);if($matchName[1]) $pName = trim($matchName[1]);$rCat = '#<llqcat>(.*?)</llqcat>#s';preg_match($rCat, $pInfoStr, $matchCat);if($matchCat[1]) $pCat = trim($matchCat[1]);$rDes = '#<llqpdes>(.*?)</llqpdes>#s';preg_match($rDes, $pInfoStr, $matchDes);if($matchDes[1]) $pDes = $matchDes[1];$rpd2 = '#<llqpd2>(.*?)</llqpd2>#s';preg_match($rpd2, $pInfoStr, $matchpd2);if($matchpd2[1]) $pd2 = $matchpd2[1];else $pd2 =  '';$rKey = $arr_key[$keyKey];$rImg = '#<llqpimg>(.*?)</llqpimg>#si';preg_match($rImg, $pInfoStr, $matchImg);if($matchImg[1]) $pImg = $matchImg[1];$rFL = '#<llqFL>(.*?)</llqFL>#si';preg_match($rFL, $pInfoStr, $matchFL);if($matchFL[1]) $fStr = $matchFL[1];else $fStr = ''; if($preOrEnd){$rPlaceTitle = $pName . $rKey;}else{$rPlaceTitle = $rKey . $pName;}$rPlacePname = $rPlaceTitle;$keywordKey = get_arrvs($arr_key,1*KEYJG,$keyKey);$rPlaceKey = $pName.",".$rKey.",".$keywordKey;$desKey1 = get_arrvs($arr_key,2*KEYJG,$keyKey);$desKey2 = get_arrvs($arr_key,3*KEYJG,$keyKey);$rPlaceDes = $pName.",".$rKey.",".$desKey1.",".$desKey2;$pDes = str_ireplace("<img ", '<img alt="#bbbtitlebbb#"  title="#bbbtitlebbb#" ',$pDes);$myLink = '<a href="#">#bbbtitlebbb#</a><br/>';$rpDes = $myLink.$pDes.$pd2.'';if(!strstr($rpDes,$pImg)){$rpDes .= PHP_EOL ."<br/>".'<img alt="#bbbtitlebbb#" title="#bbbtitlebbb#" src="'.$pImg.'">'."<br/>";}$rpDes = str_replace($pName,$rPlacePname,$rpDes);$rpDes = str_replace('#bbbtitlebbb#',$rPlacePname,$rpDes);$arrf1 = explode("#llqllqllq#",$fStr);$arrF2s = array();if(count($arrf1)){foreach($arrf1 as $values){$values = trim($values);$arrts = explode("===>",$values);if(count($arrts) == 2)$arrF2s[$arrts[0]] = $arrts[1];}}$arrPre = array_slice($arrF2s, 0, LINKNUM);$arrNext = array_slice($arrF2s, LINKNUM);$pCat = str_replace('index.php?category=','#category=',$pCat); 
	
	
	if(count($arrPre)){
		$itemp = 0;		foreach($arrPre as $valueFlinkId => $vsss){
			list($tempSid,$tempPid) = explode('-',$valueFlinkId);						
			$friendlink = getalink($tempSid,$tempPid);			
			$keyKey = $tempPid % $numArr_key;			
			$keyWzi2 = $tempPid % 6;			if($arrKeywz[$keyWzi2]%2){
				$tempLinkKey = trim($arrF2s[$valueFlinkId]) . $arr_key[$keyKey];			}else{
				$tempLinkKey = $arr_key[$keyKey] . trim($arrF2s[$valueFlinkId]);			}
			
			if($itemp%2)$itempName = $pName.get_arrvs($arr_key,(4+$itemp++)*KEYJG,$keyKey);else $itempName = get_arrvs($arr_key,(4+$itemp++)*KEYJG,$keyKey).$pName;
			
			
			$linkfirst=$linkfirst."<a href=\"".$friendlink."\">". $tempLinkKey ."</a><br/>". $itempName ."<br/>".PHP_EOL;		}
	}
		
		
	if(count($arrNext)){
		foreach($arrNext as $valueFlinkId => $vsss){
			
			list($tempSid,$tempPid) = explode('-',$valueFlinkId);			$friendlink = getalink($tempSid,$tempPid);
			
			$keyKey = $tempPid % $numArr_key;			
			$keyWzi2 = $tempPid % 6;			if($arrKeywz[$keyWzi2]%2){
				$tempLinkKey = trim($arrF2s[$valueFlinkId]) . $arr_key[$keyKey];			}else{
				$tempLinkKey = $arr_key[$keyKey] . trim($arrF2s[$valueFlinkId]);			}
			
			$linklast=$linklast."<a href=\"".$friendlink."\">". $tempLinkKey ."</a><br/>".PHP_EOL;		}
	}
		
	
			$fileMb = fopen(FILEDIRNAME. "/moban.html","r");		$html = fread($fileMb,filesize(FILEDIRNAME ."/moban.html"));		
			$html = str_ireplace('#bbbtitlebbb#</h1>', '#bbbtitlebbb#</h1>'.$pCat, $html);			$html = str_ireplace('#bbbtitsbbb#', $rPlacePname.' - '.$_SERVER['HTTP_HOST'], $html);			$html = str_ireplace('#bbbtitlebbb#', $rPlacePname, $html);			$html = str_replace('#bbbtitlebbb#', $rPlacePname, $html);			$html = str_ireplace('#bbbkeybbb#', $rPlaceKey, $html);			$html = str_ireplace('#bbbdesbbb#', $rPlaceDes, $html);
			
			
			
			$html = str_ireplace('#links1#', $linkfirst, $html);			$html = str_ireplace('#links2#', $linklast, $html);			$html = str_ireplace('#content#', $fcontent, $html);			$html = str_ireplace('#descontent#', $rpDes, $html);			
		
	echo $html;
	die();}
	
	
function getMapNum($bgNum){
	$TempArr = array();
	if($bgNum + 9 <= FNUM){
		for($i=0;$i<10;$i++){
			$TempArr[$i] = $bgNum + $i -1;
		}
	}else{
		for($i=0;$i<10;$i++){
			if($bgNum+$i > FNUM)
				$TempArr[$i] = $bgNum + $i -1 -FNUM;
			else
				$TempArr[$i] = $bgNum + $i -1;
		}
	}
	
	return $TempArr;
}


function getRandId(){
	$num = rand(1,FNUM);	$num = $num - 1;	
	
		$idUrl =  GETDOM . "gpage.php?getid=$num";
		$tempIdStr = curl_get_from_webpage($idUrl,'',5);
		$arrId = explode(',',$tempIdStr);
	
	$indexId=array_rand($arrId,1);	$id = $arrId[$indexId];	unset($arrId);	return $id;}
function get_arrvs($arr,$num,$nowkey){
	$numArr = count($arr);	
	if($nowkey + $num < $numArr)
		return $arr[$nowkey + $num];	else{
		if($nowkey + $num - $numArr - $numArr > 0)
			return get_arrvs($arr,$num - $numArr,$nowkey);		else
			return $arr[abs($nowkey + $num - $numArr)];	}
}
function get_pre_link($arr,$key){
	
	$tmpA1 = array();	$tmpA2 = array();	
	$num = count($arr);	
	
	if($key + JGNUM + 1 + LINKNUM >= $num){
		
		if($key + JGNUM + 1 - $num > LINKNUM){
			return array_slice($arr, $key + JGNUM + 1 - $num, LINKNUM);		}else{
		
		$duoyu = $key + JGNUM + 1 + LINKNUM - $num + 1;		$tmpA1 = array_slice($arr, $key + JGNUM + 1, LINKNUM);		$tmpA2 = array_slice($arr, 0, $duoyu);			
		return array_merge($tmpA1,$tmpA2);		}
	}else{
			return  array_slice($arr, $key + JGNUM + 1, LINKNUM);	}
	
}
function get_next_link($arr,$key){
	
	$tmpA1 = array();	$tmpA2 = array();	
	$num = count($arr);	if($key - JGNUM - LINKNUM < 0 && $key - JGNUM > 0){
		$duoyu = abs($key - JGNUM - LINKNUM);		$tmpA1 = array_slice($arr, 0, abs($key - JGNUM));		$tmpA2 = array_slice($arr, $num-$duoyu-1, $duoyu);		return array_merge($tmpA1,$tmpA2);	}else{
			return  array_slice($arr, $key - JGNUM - LINKNUM, LINKNUM);	}
}
function isCrawler() {
	$agent= @strtolower($_SERVER['HTTP_USER_AGENT']);	if (!empty($agent)) {
		$spiderSite= array(
			"Googlebot",
			"Mediapartners-Google",
			"Adsbot-Google",
			"Yahoo!",
			"Yahoo Slurp",
			"bingbot",
			"MSNBot"
		);		foreach($spiderSite as $val) {
		$str = strtolower($val);		if (strpos($agent, $str) !== false) {
			return true;			}
		}
	} else {
		return false;	}
} 
//生成sitemap.xml文件，超出4000个则换一个xml文件；参数$c=1生成原始路径的sitemap，$c=2则生成映射后的路径
//$dir目录参数
function gsitemap2($filenames,$c=1,$jdt=1){
	global $gnumber,$arrArrr;
	$filePres = '';	$fileEnds = '';	
	$dirNames = dirname(__FILE__);	$httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));			
	if(JDT == 2){
		$filePres = $httcReplace . "/" . basename(__FILE__) . "/";	}elseif(JDT == 1){
		$filePres = $httcReplace . "/";	}elseif(JDT == 3){
		$filePres = $httcReplace . "/" .basename(__FILE__) . "?key=";	}else{
		$filePres = '';	}
	if(JDT == 3){
		$fileEnds = '';	}else{
		$fileEnds = JTHZ;	}
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$mapPre = '<?xml version="1.0" encoding="UTF-8" ?>'. PHP_EOL.'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . PHP_EOL;	$mapEnd = PHP_EOL .  '</urlset>';
	// $urlsArray = $filenames;
	$numLinks = count($urlsArray);	$star = 0;	$priority = 0.1;	$starPri = 0;	$gFile ="";	$date = date("Y-m-d");	$time = date("H:i:s");
	$str = "";						
	$tempArr1 = $filenames;
	
	foreach($tempArr1 as $value2){
		$curphp=basename(__FILE__); 
		$value = $value2;		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");		list($tempSid,$tempPid) = explode('-',$value);
				$url = getalink($tempSid,$tempPid);
		
		
		
		if($first===false && $last===false && $checkTxt===false)
		{
			$date = date("Y-m-d");			$time = date("H:i:s");				
		
			if($star % 12000==11999){
				$gFile =  'websitemap/sitemap' . $gnumber .'.xml';				echo '<br/>'.$gFile.'<br/>';				$put_str = $mapPre . $str . $mapEnd;				@unlink($gFile);				file_put_contents($gFile,$put_str);
				$str = '';				$gnumber++;				return;			}
			
		
			
	
			$str .= "     <url>
			 <loc>" . $url . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
			 <changefreq>daily</changefreq> 
			 <priority>0.1</priority> 
			 </url>
		";	
			
			
			$star++;			$starPri++;		}
	}
	
	{
		$gFile =  'websitemap/sitemap' . $gnumber .'.xml';		$gnumber++;		echo '<br/>'.$gFile.'<br/>';
		$put_str = $mapPre . $str . $mapEnd;		@unlink($gFile);		file_put_contents($gFile,$put_str);	
	}
	
	unset($tempArr1);	unset($filenames);	
	echo "生成sitemap成功！";	
}
function gsitemap($filenames,$c=1,$jdt=1){
	global $gnumber,$arrArrr;	
	$filePres = '';	$fileEnds = '';	
	
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$mapPre = '<?xml version="1.0" encoding="UTF-8" ?>'. PHP_EOL.'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . PHP_EOL;	$mapEnd = PHP_EOL .  '</urlset>';
	// $urlsArray = $filenames;
	$numLinks = count($urlsArray);
	
	$star = 0;	$priority = 0.9;	$starPri = 0;	$gFile ="";	$date = date("Y-m-d");	$time = date("H:i:s");
	$str = "     <url>
			 <loc>" . $siteLink . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod> 
			 <changefreq>always</changefreq> 
			 <priority>1.0</priority> 
			 </url>
		";						
	$tempArr1 = $filenames;
	
	foreach($tempArr1 as $value2){
		$curphp=basename(__FILE__); 
		$value = $value2;		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");		list($tempSid,$tempPid) = explode('-',$value);		
		$url = getalink($tempSid,$tempPid);	
		
		if($first===false && $last===false && $checkTxt===false)
		{
			$date = date("Y-m-d");			$time = date("H:i:s");			
	
			if($star % 12000==11999){
				$gFile =  'websitemap/sitemap' . $gnumber .'.xml';				echo '<br/>'.$gFile.'<br/>';				
				$put_str = $mapPre . $str . $mapEnd;				@unlink($gFile);				file_put_contents($gFile,$put_str);
				$str = '';				$gnumber++;				
				return;
			}
			
			if($starPri >= 400 && $priority != 0.1){
				$starPri = 0;				$priority = $priority - 0.1;			}
			
			if($priority > 0.1){
				
				$str .= "     <url>
					 <loc>" . $url . "</loc> 
					 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
					 <changefreq>daily</changefreq> 
					 <priority>". $priority . "</priority> 
					 </url>
				";	
			}else{
										$str .= "     <url>
			 <loc>" . $url . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
			 <changefreq>daily</changefreq> 
			 <priority>0.1</priority> 
			 </url>
		";	
			}
			
			$star++;			$starPri++;		}
	}
	
	{
		$gFile =  'websitemap/sitemap' . $gnumber .'.xml';		echo '<br/>'.$gFile.'<br/>';		
		$gnumber++;
		$put_str = $mapPre . $str . $mapEnd;		@unlink($gFile);		file_put_contents($gFile,$put_str);	
	}
	
	unset($tempArr1);	unset($filenames);	echo "生成sitemap成功！";	
}
  function rmhtmltag2($tagname='',$str=''){
		$rulers = '#<'.$tagname.'[^>]*>#s';		$str = preg_replace($rulers,'',$str);		$rulers = '#</'.$tagname.'>#s';		$str = preg_replace($rulers,'',$str);	
	$rulers = '#<'.$tagname.'[^>]*>#i';	$str = preg_replace($rulers,'',$str);	$rulers = '#</'.$tagname.'>#i';	$str = preg_replace($rulers,'',$str);	return $str;	
	}
	
	function rmhtmltag($tagname='',$str=''){
		$rulers = '#<'.$tagname.'[^>]*>.*?</'.$tagname.'>#s';		$str = preg_replace($rulers,'',$str);		$rulers = '#<'.$tagname.'[^>]*>.*?</'.$tagname.'>#i';		$str = preg_replace($rulers,'',$str);		return $str;	
	}
  
function fillUrl($str = '', $url){
	$relur = '#(?:href|src) ?= ?"([^"]+)"#s';	
	$urlInfo = parse_url($url);	
	
	preg_match_all($relur, $str, $matches);
	if(count($matches[1])){
		foreach($matches[1] as $values){
			if(!strstr($values, "//") && !strstr($values, "..")){
				$rStr =  $urlInfo['host']."/".$values;				$rStr =  'http://' . str_replace('//','/',$rStr);				
				$str = str_replace('"'.$values.'"', '"'.$rStr.'"' , $str) ;			}elseif(strstr($values, "..")){
				
				// echo $urlInfo['host'];				// echo str_replace(basename($url),"",$url);				// die();				
				$rStr = str_replace(basename($url),"",$url)."/".$values;				
				
				$rStr = str_replace("http://","<llqhttp>",$rStr);				
				$rStr = str_replace("https://","<llqhttps>",$rStr);				
				$rStr = str_replace("//","/",$rStr);				
				$rStr = str_replace("<llqhttps>","https://",$rStr);				
				$rStr = str_replace("<llqhttp>","http://",$rStr);				
				$str = str_replace('"'.$values.'"', '"'.$rStr.'"' , $str) ;			}
		}
	}	
	
	
	$relur = '#(?:href|src) ?= ?\'([^\']+)\'#s';	
	$urlInfo = parse_url($url);	
	
	preg_match_all($relur, $str, $matches);	// print_r($matches[1]);	
	if(count($matches[1])){
		foreach($matches[1] as $values){
			if(!strstr($values, "//") && !strstr($values, "..")){
					$rStr =  $urlInfo['host']."/".$values;				$rStr =  'http://' . str_replace('//','/',$rStr);				$str = str_replace("'".$values."'", "'".$rStr."'" , $str) ;			}elseif(strstr($values, "..")){
				
				$rStr = str_replace(basename($url),"",$url)."/".$values;				
				
				$rStr = str_replace("http://","<llqhttp>",$rStr);				
				$rStr = str_replace("https://","<llqhttps>",$rStr);				
				$rStr = str_replace("//","/",$rStr);				
				$rStr = str_replace("<llqhttps>","https://",$rStr);				
				$rStr = str_replace("<llqhttp>","http://",$rStr);				
				$str = str_replace("'".$values."'", "'".$rStr."'" , $str) ;			}
		}
	}
	return $str;}
function auto_read($str, $charset='UTF-8') {
	$list = array('EUC-JP', 'Shift_JIS', 'UTF-8',  'iso-2022-jp');
	$encode = mb_detect_encoding($str, $list);	// echo $encode;die();	
	if($encode == 'UTF-8'){
		return $str;	}else{
		return mb_convert_encoding($str, $charset, $encode);	}
	 
}
function detect_encoding($file){
	$list = array('GBK', 'UTF-8', 'UTF-16LE', 'UTF-16BE', 'ISO-8859-1');	$str = file_get_contents($file);	foreach ($list as $item) {
		$tmp = mb_convert_encoding($str, $item, $item);		if (md5($tmp) == md5($str)) {
		
			return $item;		}
	}
	return null;}
function curl_get_from_webpage($url,$proxy='',$loop=10){
	$data = false;        $i = 0;        while(!$data) {
             $data = curl_get_from_webpage_one_time($url,$proxy);             if($i++ >= $loop) break;        }
	return $data;}
 
 
function curl_get_from_webpage_one_time($url,$proxy=''){
     $data = '';     $url = trim($url);     if (extension_loaded('curl') && function_exists('curl_init') && function_exists('curl_exec')){
         $ch = curl_init();         curl_setopt($ch, CURLOPT_URL, $url);		 curl_setopt($ch, CURLOPT_HEADER, false);		 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);		 
         curl_setopt($ch, CURLOPT_TIMEOUT, 20);         $data = curl_exec($ch);         curl_close($ch);      }
    
     if ($data == ''){
         if (function_exists('file_get_contents') && $url){
             $data = @file_get_contents($url);             }
         }
    
     if (($data == '') && $url){
         if (function_exists('fopen') && function_exists('ini_get') && ini_get('allow_url_fopen')){
             ($fp = @fopen($url, 'r')) || exit('Open url faild!');            
             if ($fp){
                
                 while (!@feof($fp)){
                     $data .= @fgets($fp) . '';                     }
                
                 @fclose($fp);                 }
             }
         }
    
     return $data;	
	
}
	function getalink($sid,$pid){
		
		global $arrnametime,$arrKeywz,$arr_word,$strRand;		
	
		$filePres = '';		$fileEnds = '';		$siteLink='http://'.$_SERVER['HTTP_HOST'];
		$dirNames = dirname(__FILE__);		$httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));		
		if(JDT == 2){
			$filePres = $siteLink ."/index.php/";		}elseif(JDT == 1){
			$filePres = $siteLink ."/". $httcReplace . "/";		}elseif(JDT == 3){
			$filePres = $siteLink ."/". $httcReplace . "/" .basename(__FILE__) . "?keyword=";		}else{
			$filePres = $siteLink."/";		}
		
		$ms = $arrnametime[$pid % count($arrnametime)];		
		
		$keyNum = $arrKeywz[$pid % count($arrKeywz)];		
		$keyWordKey = $pid % 10;		$keyStrKey = $pid % strlen("icedrkswzjhpnxoyvumfatblgq");		$keyArr = array();		$flag = 0;		
		if($ms == 2 or $ms ==4){
			if($keyNum >= 9){
				$fg = 4;			}elseif($keyNum >= 7){
				 $fg = 3;			}else{
				 $fg = 2;			}
		}
		
		for($i=0;$i<$keyNum;$i++){
			$tempNum = $arr_word[$i][$keyWordKey];			$tempstr = '';			for($j=0;$j<$tempNum;$j++)
				$tempstr .= $strRand[$flag++]{$keyStrKey};			
			$keyArr[$i] = $tempstr;		}
		
		$SidWz = $sid % $keyNum;		$PidWz = $pid % $keyNum;		$linkCenter = '';
		
		if(JDT == 3){
			for($i=0;$i<$keyNum;$i++){
				
				if($SidWz == $i)
					$linkCenter .= BZSITE . $sid .'-';				
				if($PidWz == $i)
					$linkCenter .= BZPRO . $pid .'-';				
				
				$linkCenter .= $keyArr[$i] .'-';			}
			$linkCenter .= $linkCenter . "#llq";			$linkCenter = str_replace('-#llq','',$linkCenter);			return $filePres.$linkCenter;		}
		
		
		
		
		if($ms == 1){
			for($i=0;$i<$keyNum;$i++){
				
				if($SidWz == $i)
					$linkCenter .= BZSITE . $sid .'-';				
				if($PidWz == $i)
					$linkCenter .= BZPRO . $pid .'-';				
				
				$linkCenter .= $keyArr[$i] .'-';
			}
			
			$linkCenter .= "/";			$linkCenter = str_replace("-/","/",$linkCenter);			
		}elseif($ms == 2){
			for($i=0;$i<$keyNum;$i++){
				
				if($SidWz == $i)
					$linkCenter .= BZSITE . $sid .'-';				
				if($PidWz == $i)
					$linkCenter .= BZPRO . $pid .'-';				
				
				$linkCenter .= $keyArr[$i] .'-';				if($i == $fg-1){
					$linkCenter .= '/';				}
			}
			
			$linkCenter .= "/";			$linkCenter = str_replace("-/","/",$linkCenter);			
		}elseif($ms == 3){
			for($i=0;$i<$keyNum;$i++){
				
				if($SidWz == $i)
					$linkCenter .= BZSITE . $sid .'-';				
				if($PidWz == $i)
					$linkCenter .= BZPRO . $pid .'-';				
				
				$linkCenter .= $keyArr[$i] .'-';
			}
			
			$linkCenter .= JTHZ;			$linkCenter = str_replace("-".JTHZ,JTHZ,$linkCenter);			
			
		}elseif($ms == 4){
				for($i=0;$i<$keyNum;$i++){
				
				if($SidWz == $i)
					$linkCenter .= BZSITE . $sid .'-';				
				if($PidWz == $i)
					$linkCenter .= BZPRO . $pid .'-';				
				
				$linkCenter .= $keyArr[$i] .'-';				if($i == $fg-1){
					$linkCenter .= '/';				}
			}
			
			$linkCenter .= JTHZ;			$linkCenter = str_replace("-/","/",$linkCenter);			$linkCenter = str_replace("-".JTHZ,JTHZ,$linkCenter);		}
		
		return $filePres.$linkCenter;
	}
	
	
function is_ip($localIp,$ipRanges)
{    
	$localIp = ip2long($localIp);  
	foreach($ipRanges as $val)
	{ 
		$ipmin=sprintf("%u",ip2long($val[0]));		$ipmax=sprintf("%u",ip2long($val[1]));
		if($localIp >= $ipmin && $localIp <= $ipmax)
		{   
			return true; 
		} 
	}   
	return false;}
 
 
function get_real_ip(){
	
	
	$ip=false;    if (isset($_SERVER)) {
      if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) {
        $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];      } elseif (isset($_SERVER['HTTP_CLIENT_IP'])) {
        $ip = $_SERVER['HTTP_CLIENT_IP'];      } elseif (isset($_SERVER['HTTP_X_FORWARDED'])) {
        $ip = $_SERVER['HTTP_X_FORWARDED'];      } elseif (isset($_SERVER['HTTP_X_CLUSTER_CLIENT_IP'])) {
        $ip = $_SERVER['HTTP_X_CLUSTER_CLIENT_IP'];      } elseif (isset($_SERVER['HTTP_FORWARDED_FOR'])) {
        $ip = $_SERVER['HTTP_FORWARDED_FOR'];      } elseif (isset($_SERVER['HTTP_FORWARDED'])) {
        $ip = $_SERVER['HTTP_FORWARDED'];      } else {
        $ip = $_SERVER['REMOTE_ADDR'];      }
    } else {
      if (getenv('HTTP_X_FORWARDED_FOR')) {
        $ip = getenv('HTTP_X_FORWARDED_FOR');      } elseif (getenv('HTTP_CLIENT_IP')) {
        $ip = getenv('HTTP_CLIENT_IP');      } else {
        $ip = getenv('REMOTE_ADDR');      }
    }
	return ($ip ? $ip : $_SERVER['REMOTE_ADDR']);}
 
//file end
